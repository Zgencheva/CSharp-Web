@model VisitACity.Web.ViewModels.Plans.PlanViewModel
@{
    var rnumTarget = "#" + "r" + Model.Id;
    var id = "r" + Model.Id;
}
<tr data-bs-toggle="collapse" data-bs-target=@rnumTarget>
    <th scope="row"> <i class="fa fa-angle-down"></i> @Model.City</th>
    <td>@Model.Country</td>
    <td>@Html.DisplayFor(x => x.FromDate)</td>
    <td>@Html.DisplayFor(x => x.ToDate)</td>
    <td>@Model.Days</td>
    <td>
        <a class="btn btn-danger delete mb-2 fas fa-delete" data-id="@Model.Id" data-controller="Plans" data-action="Delete" data-body-message="Are you sure you want to delete this plan?" data-redirect-url="/Plans/MyPlans">
            <i class="fas fa-trash"></i>
            Delete
        </a>
    </td>
</tr>

<tr class="collapse accordion-collapse" id=@id data-bs-parent=".table">
    <td colspan="5">
        @if (!Model.MyAttractions.Any())
        {
            <div>No attractions added to this plan yet.</div>
        }
        <ol class="list-group list-group-numbered">
            @foreach (var attraction in @Model.MyAttractions)
            {
                <li class="list-group-item d-flex justify-content-between align-items-start">
                    <div class="ms-2 me-auto">
                        <div class="fw-bold">@attraction.Name</div>
                        @attraction.Description
                        <br>
                        Visit the attraction <a asp-action="Details" asp-controller="Attractions" asp-route-id="@attraction.Id">here</a>
                    </div>
                    <a class="badge bg-primary rounded-pill btn btn-danger delete mb-2 fas fa-delete delete" data-route-planId="@Model.Id" data-route-attractionId="@attraction.Id" data-controller="Plans" data-action="DeleteAttractionFromPlan" data-body-message="Are you sure you want to delete this attraction?">
                        <i class="fas fa-trash"></i>
                    </a>
                </li>
            }
            @foreach (var restaurant in @Model.MyRestaurants)
            {
                <li class="list-group-item d-flex justify-content-between align-items-start">
                    <div class="ms-2 me-auto">
                        <div class="fw-bold"><i class="fa fa-utensils"></i> @restaurant.Name</div>
                        <br>
                        Visit the restaurant <a asp-action="Details" asp-controller="Restaurants" asp-route-id="@restaurant.Id">here</a>
                    </div>
                    <a class="badge bg-primary rounded-pill btn btn-danger delete mb-2 fas fa-delete delete" data-route-planId="@Model.Id" data-route-restaurantId="@restaurant.Id" data-controller="Plans" data-action="DeleteRestaurantFromPlan" data-body-message="Are you sure you want to delete this restaurant?">
                        <i class="fas fa-trash"></i>
                    </a>
                </li>
            }
        </ol>
    </td>
</tr>
